---
import ThemeToggle from './ThemeToggle.astro';

const navLinks = [
  { label: 'About', href: '/about' },
  { label: 'Writing', href: '/writing' },
  { label: 'Projects', href: '/projects' },
  { label: 'Speaking', href: '/speaking' },
];

const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-800">
  <nav class="flex items-center justify-between py-4">
    <a href="/" class="font-serif text-lg font-semibold text-neutral-900 dark:text-neutral-100 hover:opacity-80 transition-opacity">
      Anita Srinivasan
    </a>

    <!-- Desktop nav -->
    <div class="hidden md:flex items-center gap-6">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'text-sm transition-colors',
            currentPath.startsWith(link.href)
              ? 'text-neutral-900 dark:text-neutral-100 underline underline-offset-4 decoration-neutral-400 dark:decoration-neutral-500'
              : 'text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100',
          ]}
        >
          {link.label}
        </a>
      ))}
      <ThemeToggle />
    </div>

    <!-- Mobile menu button -->
    <div class="flex items-center gap-2 md:hidden">
      <ThemeToggle />
      <button
        id="mobile-menu-btn"
        aria-label="Toggle menu"
        class="p-2 text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors"
      >
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5" />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile nav -->
  <div id="mobile-menu" class="hidden md:hidden pb-4 border-t border-neutral-100 dark:border-neutral-800">
    <div class="flex flex-col gap-3 pt-3">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'text-sm transition-colors',
            currentPath.startsWith(link.href)
              ? 'text-neutral-900 dark:text-neutral-100'
              : 'text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100',
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</header>

<script is:inline>
  document.getElementById('mobile-menu-btn').addEventListener('click', () => {
    document.getElementById('mobile-menu').classList.toggle('hidden');
  });
</script>
